import './polyfills.server.mjs';
import{a as oe}from"./chunk-UGWVMTJS.mjs";import{a as ae,b as le,c as me}from"./chunk-233UEED2.mjs";import{$ as T,Ba as U,Ca as G,_ as I,b as _,c as u,ca as D,da as ie,e as y,ea as N,f as F,fa as B,ga as q,h as ne,ha as j,j as O,ja as A,l as re,m as R,n as w,t as P,u as k,v as L}from"./chunk-24LZH53U.mjs";import{c as S}from"./chunk-DIX5HIF5.mjs";import{m as te,o as M,p as E}from"./chunk-C3HGTDI4.mjs";import"./chunk-24XWOOB4.mjs";import{Ib as r,Jc as x,La as l,Qb as C,R as Q,Wa as J,Z as c,ba as b,bb as p,fb as f,ja as Z,kb as s,n as Y,oc as ee,pb as o,qb as t,rb as m,sa as $,vb as v}from"./chunk-MVYDPQ2D.mjs";import{d as X}from"./chunk-5XUXGTUW.mjs";var H=class n{static \u0275fac=function(a){return new(a||n)};static \u0275cmp=b({type:n,selectors:[["app-auth-layout"]],standalone:!0,features:[C],decls:3,vars:0,template:function(a,i){a&1&&(m(0,"app-navbar-lp"),o(1,"div"),m(2,"router-outlet"),t())},dependencies:[oe,te]})};function fe(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function he(n,e){n&1&&(o(0,"mat-error"),r(1,"Introduzca un correo electr\xF3nico v\xE1lido."),t())}function be(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function Ce(n,e){n&1&&(o(0,"mat-error"),r(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}var z=class n{loginForm;fb=c(P);authService=c(S);router=c(M);snackBar=c(U);CUSTOMER_ROLE="CUSTOMER";CARER_ROLE="CARER";CUSTOMER_ROUTE="/customer/panelControl";CARER_ROUTE="/carer/mensajes";DEFAULT_ROUTE="/home";constructor(){this.loginForm=this.fb.group({email:["",[u.required,u.email]],contrasena:["",[u.required]]})}controlHasError(e,a){return this.loginForm.controls[e].hasError(a)}onSubmit(){if(this.loginForm.invalid)return;console.log(this.loginForm.value);let e=this.loginForm.value;this.authService.login(e).subscribe({next:()=>{this.showSnackBar("Inicio de sesi\xF3n exitoso"),this.redirectUserBasedOnRole()},error:()=>{this.showSnackBar("Error en el inicio de sesi\xF3n. Por favor, intenta de nuevo.")}})}redirectUserBasedOnRole(){let e=this.authService.getUserRole();e===this.CUSTOMER_ROLE?this.router.navigate([this.CUSTOMER_ROUTE]):e===this.CARER_ROLE?this.router.navigate([this.CARER_ROUTE]):this.router.navigate([this.DEFAULT_ROUTE])}showSnackBar(e){this.snackBar.open(e,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=b({type:n,selectors:[["app-login"]],standalone:!0,features:[C],decls:32,vars:6,consts:[[1,"auth-container"],[1,"auth-image"],["src","../../../../assets/img/gato-compu.png","alt","Imagen de inicio de sesi\xF3n"],[1,"auth-form"],[1,"auth-toggle"],["routerLink","/auth/login","routerLinkActive","active-tab"],["routerLink","/auth/register","routerLinkActive","active-tab"],[1,"form-content"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["appearance","outline",1,"form-input"],["matInput","","formControlName","email","placeholder","Introduce tu correo"],["matInput","","formControlName","contrasena","type","password","placeholder","Introduce tu contrase\xF1a"],[1,"forgot-password"],["href","#"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"]],template:function(a,i){a&1&&(o(0,"div",0)(1,"div",1),m(2,"img",2),t(),o(3,"div",3)(4,"div",4)(5,"a",5),r(6,"Inicio de Sesi\xF3n"),t(),o(7,"a",6),r(8,"Registrarse"),t()(),o(9,"div",7)(10,"h2"),r(11,"Inicio de Sesi\xF3n"),t(),o(12,"form",8),v("ngSubmit",function(){return i.onSubmit()}),o(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),r(16,"Correo Electr\xF3nico"),t(),m(17,"input",11),p(18,fe,2,0,"mat-error")(19,he,2,0,"mat-error"),t()(),o(20,"div",9)(21,"mat-form-field",10)(22,"mat-label"),r(23,"Contrase\xF1a"),t(),m(24,"input",12),p(25,be,2,0,"mat-error")(26,Ce,2,0,"mat-error"),t()(),o(27,"p",13)(28,"a",14),r(29,"\xBFOlvidaste tu contrase\xF1a?"),t()(),o(30,"button",15),r(31," Iniciar Sesi\xF3n "),t()()()()()),a&2&&(l(12),f("formGroup",i.loginForm),l(6),s(i.controlHasError("email","required")?18:-1),l(),s(i.controlHasError("email","email")?19:-1),l(6),s(i.controlHasError("contrasena","required")?25:-1),l(),s(i.controlHasError("contrasena","minlength")?26:-1),l(4),f("disabled",i.loginForm.invalid))},dependencies:[k,O,_,y,F,L,R,w,A,j,B,N,D,I,T,q,G,E,x],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;width:auto;margin:0 auto;height:100%}.auth-image[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.auth-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.auth-form[_ngcontent-%COMP%]{flex:1;padding:40px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;text-align:center}.auth-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.auth-toggle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 15px;font-size:16px;text-decoration:none;color:#444}.auth-toggle[_ngcontent-%COMP%]   a.active-tab[_ngcontent-%COMP%]{font-weight:700;color:#007bff}.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.form-group[_ngcontent-%COMP%]{width:100%;max-width:300px;margin-bottom:15px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}mat-label[_ngcontent-%COMP%]{text-align:center}mat-error[_ngcontent-%COMP%]{text-align:center}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[_ngcontent-%COMP%]{padding:10px;background-color:#bf815e;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;width:100%;max-width:300px}button[_ngcontent-%COMP%]:hover{background-color:#9f6749}"]})};function K(n,e){let a=!e?.manualCleanup;a&&!e?.injector&&Z(K);let i=a?e?.injector?.get($)??c($):null,d=ve(e?.equal),h;e?.requireSync?h=J({kind:0},{equal:d}):h=J({kind:1,value:e?.initialValue},{equal:d});let W=n.subscribe({next:g=>h.set({kind:1,value:g}),error:g=>{if(e?.rejectErrors)throw g;h.set({kind:2,error:g})}});if(e?.requireSync&&h().kind===0)throw new Q(601,!1);return i?.onDestroy(W.unsubscribe.bind(W)),ee(()=>{let g=h();switch(g.kind){case 1:return g.value;case 2:throw g.error;case 0:throw new Q(601,!1)}},{equal:e?.equal})}function ve(n=Object.is){return(e,a)=>e.kind===1&&a.kind===1&&n(e.value,a.value)}function xe(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function Me(n,e){n&1&&(o(0,"mat-error"),r(1,"Introduzca un correo electr\xF3nico v\xE1lido."),t())}function Ee(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function Se(n,e){n&1&&(o(0,"mat-error"),r(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function _e(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function ye(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}function Fe(n,e){n&1&&(o(0,"mat-error"),r(1,"Este campo es obligatorio"),t())}var V=class n{floatLabelControl=new ne("auto");registerForm;rb=c(P);router=c(M);snackBar=c(U);authService=c(S);constructor(){this.registerForm=this.rb.group({nombre:["",[u.required]],apellido:["",[u.required]],telefono:["",[u.required]],email:["",[u.required,u.email]],contrasena:["",[u.required,u.minLength(8)]],tipo:this.floatLabelControl})}floatLabel=K(this.floatLabelControl.valueChanges.pipe(Y(e=>e||"customer")),{initialValue:"customer"});controlHasError(e,a){return this.registerForm.controls[e].hasError(a)}onSubmit(){if(this.registerForm.valid){let e=this.registerForm.value,{tipo:a}=e,i=X(e,["tipo"]);console.log(i),this.registerForm.value.tipo=="customer"?this.authService.registerCustomer(i).subscribe({next:d=>{this.showSnackBar("Usuario creado correctamente"),this.router.navigate(["auth/login"])},error:d=>{this.showSnackBar(d.error.message)}}):this.registerForm.value.tipo=="cuidador"&&this.authService.registerCarer(i).subscribe({next:d=>{this.showSnackBar("Usuario creado correctamente"),this.router.navigate(["auth/login"])},error:d=>{this.showSnackBar(d.error.message)}})}}showSnackBar(e){this.snackBar.open(e,"Close",{duration:2e3,verticalPosition:"top"})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=b({type:n,selectors:[["app-register"]],standalone:!0,features:[C],decls:55,vars:10,consts:[[1,"auth-container"],[1,"auth-image"],["src","../../../../assets/img/gato-compu.png","alt","Imagen de inicio de sesi\xF3n"],[1,"auth-form"],[1,"auth-toggle"],["routerLink","/auth/login","routerLinkActive","active-tab"],["routerLink","/auth/register","routerLinkActive","active-tab"],[1,"form-content"],[1,"login-form",3,"ngSubmit","formGroup"],[3,"formControl"],["value","customer"],["value","cuidador"],[1,"form-group"],["appearance","outline",1,"form-input"],["matInput","","formControlName","email","placeholder","Introduce tu correo"],["matInput","","formControlName","contrasena","type","password","placeholder","Introduce tu contrase\xF1a"],["matInput","","formControlName","nombre","placeholder","Introduce tu nombre"],["matInput","","formControlName","apellido","placeholder","Introduce tu apellido"],["matInput","","formControlName","telefono","placeholder","Introduce tu telefono"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"]],template:function(a,i){a&1&&(o(0,"div",0)(1,"div",1),m(2,"img",2),t(),o(3,"div",3)(4,"div",4)(5,"a",5),r(6,"Inicio de Sesi\xF3n"),t(),o(7,"a",6),r(8,"Registrarse"),t()(),o(9,"div",7)(10,"h2"),r(11,"Registrate"),t(),o(12,"form",8),v("ngSubmit",function(){return i.onSubmit()}),o(13,"div")(14,"label"),r(15,"\xBFQue tipo de usuario eres? "),t(),o(16,"mat-radio-group",9)(17,"mat-radio-button",10),r(18,"customer"),t(),o(19,"mat-radio-button",11),r(20,"cuidador"),t()()(),o(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),r(24,"Correo Electr\xF3nico"),t(),m(25,"input",14),p(26,xe,2,0,"mat-error")(27,Me,2,0,"mat-error"),t()(),o(28,"div",12)(29,"mat-form-field",13)(30,"mat-label"),r(31,"Contrase\xF1a"),t(),m(32,"input",15),p(33,Ee,2,0,"mat-error")(34,Se,2,0,"mat-error"),t()(),o(35,"div",12)(36,"mat-form-field",13)(37,"mat-label"),r(38,"Nombre"),t(),m(39,"input",16),p(40,_e,2,0,"mat-error"),t()(),o(41,"div",12)(42,"mat-form-field",13)(43,"mat-label"),r(44,"Apellido"),t(),m(45,"input",17),p(46,ye,2,0,"mat-error"),t()(),o(47,"div",12)(48,"mat-form-field",13)(49,"mat-label"),r(50,"Telefono"),t(),m(51,"input",18),p(52,Fe,2,0,"mat-error"),t()(),o(53,"button",19),r(54," Crear Cuenta "),t()()()()()),a&2&&(l(12),f("formGroup",i.registerForm),l(4),f("formControl",i.floatLabelControl),l(10),s(i.controlHasError("email","required")?26:-1),l(),s(i.controlHasError("email","email")?27:-1),l(6),s(i.controlHasError("contrasena","required")?33:-1),l(),s(i.controlHasError("contrasena","minlength")?34:-1),l(6),s(i.controlHasError("nombre","required")?40:-1),l(6),s(i.controlHasError("apellido","required")?46:-1),l(6),s(i.controlHasError("telefono","required")?52:-1),l(),f("disabled",i.registerForm.invalid))},dependencies:[k,O,_,y,F,L,re,R,w,A,j,B,N,D,I,T,q,G,E,x,ie,le,me,ae],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;width:auto;margin:0 auto;height:100%}.auth-image[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.auth-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.auth-form[_ngcontent-%COMP%]{flex:1;padding:40px;display:flex;flex-direction:column;justify-content:center;align-items:center}h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;text-align:center}.auth-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.auth-toggle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 15px;font-size:16px;text-decoration:none;color:#444}.auth-toggle[_ngcontent-%COMP%]   a.active-tab[_ngcontent-%COMP%]{font-weight:700;color:#007bff}.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.form-group[_ngcontent-%COMP%]{width:100%;max-width:300px;margin-bottom:15px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}mat-label[_ngcontent-%COMP%]{text-align:center}mat-error[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{padding:10px;background-color:#bf815e;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;width:100%;max-width:300px}button[_ngcontent-%COMP%]:hover{background-color:#9f6749}"]})};var Ct=[{path:"",component:H,children:[{path:"login",component:z},{path:"register",component:V}]}];export{Ct as authRoutes};
